<section class="variant variant-c">
  <header>
    <h1>{{ 'variant.c.title' | i18n }}</h1>
    <p>Panel dividido maestro-detalle con atajos de teclado.</p>
  </header>
  <div class="variant-c__split">
    <div class="variant-c__master">
      @if (rows$ | async; as rows) {
        <app-data-table
          [columns]="columns"
          [data]="rows"
          [pageSize]="30"
          density="compact"
          (rowSelected)="select($event.row)"
        ></app-data-table>
      }
    </div>
    @if (selection(); as selected) {
      <div class="variant-c__detail">
        <app-detail-page
          [header]="{
            titulo: asString(selected['nombre']),
            estado: asString(selected['etapa']),
            propietario: asString(selected['propietario'] || 'Sin asignar'),
            monto: asNumber(selected['monto']),
            fechaCierre: asString(selected['cierrePrevisto'])
          }"
          [properties]="[
            { label: 'Probabilidad', value: asString(selected['probabilidad']) },
            { label: 'Cuenta', value: asString(selected['cuenta']) },
            { label: 'Fuente', value: asString(selected['fuente']) },
            { label: 'Territorio', value: asString(selected['territorio']) }
          ]"
          [timeline]="[
            { fecha: asString(selected['cierrePrevisto']), titulo: 'Cierre esperado', descripcion: 'Seguimiento automÃ¡tico' }
          ]"
        ></app-detail-page>
      </div>
    }
  </div>
</section>
