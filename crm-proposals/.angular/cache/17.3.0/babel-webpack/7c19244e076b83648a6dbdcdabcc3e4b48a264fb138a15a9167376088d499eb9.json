{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { combineLatest, map } from 'rxjs';\nimport { InMemoryDataService } from '../../../core/data/in-memory-data.service';\nimport { ActivityStateService } from '../../../core/services/activity-state.service';\nimport { KpiCardComponent } from '../kpi-card/kpi-card.component';\nimport { MiniChartComponent } from '../mini-chart/mini-chart.component';\nimport { DataTableComponent } from '../data-table/data-table.component';\nimport { I18nPipe } from '../../utils/i18n.pipe';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nconst _c0 = () => [4, 8, 6, 12, 9, 14];\nconst _c1 = () => [120, 180, 160, 220, 260, 280];\nconst _c2 = () => [45, 30, 25];\nfunction DashboardPageComponent_Conditional_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"app-kpi-card\", 12)(2, \"app-kpi-card\", 13);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelement(4, \"app-kpi-card\", 14);\n    i0.ɵɵpipe(5, \"percent\");\n    i0.ɵɵelement(6, \"app-kpi-card\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const kpi_r1 = ctx;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", kpi_r1.abiertas);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(3, 4, kpi_r1.total, \"USD\") || \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", i0.ɵɵpipeBind2(5, 7, kpi_r1.winRate, \"1.0-0\") || \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", kpi_r1.proximas);\n  }\n}\nfunction DashboardPageComponent_Conditional_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-data-table\", 16);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"columns\", ctx_r1.columns)(\"data\", ctx)(\"pageSize\", 10)(\"enableInlineEdit\", false);\n  }\n}\nexport let DashboardPageComponent = /*#__PURE__*/(() => {\n  class DashboardPageComponent {\n    data = inject(InMemoryDataService);\n    activities = inject(ActivityStateService);\n    activities$ = this.activities.activities$;\n    opportunities$ = this.data.getOpportunities();\n    kpi$ = combineLatest([this.opportunities$, this.activities$]).pipe(map(([opportunities, activities]) => {\n      const abiertas = opportunities.filter(item => item.etapa !== 'Cierre').length;\n      const total = opportunities.reduce((acc, item) => acc + item.monto, 0);\n      const winRate = 0.31;\n      const proximas = activities.filter(activity => activity.estado === 'Pendiente').length;\n      return {\n        abiertas,\n        total,\n        winRate,\n        proximas\n      };\n    }));\n    columns = [{\n      key: 'asunto',\n      title: 'Actividad',\n      sortable: true,\n      filterable: true\n    }, {\n      key: 'tipo',\n      title: 'Tipo',\n      sortable: true\n    }, {\n      key: 'fecha',\n      title: 'Fecha',\n      type: 'date',\n      sortable: true\n    }, {\n      key: 'cuenta',\n      title: 'Cuenta',\n      sortable: true\n    }, {\n      key: 'estado',\n      title: 'Estado',\n      sortable: true\n    }];\n    static ɵfac = function DashboardPageComponent_Factory(t) {\n      return new (t || DashboardPageComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardPageComponent,\n      selectors: [[\"app-dashboard-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 22,\n      vars: 18,\n      consts: [[1, \"dashboard\"], [1, \"dashboard__header\"], [1, \"dashboard__grid\"], [1, \"dashboard__charts\"], [\"type\", \"bar\", 3, \"values\"], [\"type\", \"line\", 3, \"values\"], [\"type\", \"donut\", 3, \"values\"], [\"aria-labelledby\", \"activitiesTitle\", 1, \"dashboard__activities\"], [1, \"dashboard__activities-header\"], [\"id\", \"activitiesTitle\"], [\"type\", \"button\"], [\"density\", \"compact\"], [\"label\", \"Oportunidades abiertas\", \"trend\", \"up\", \"helper\", \"vs. semana anterior\", 3, \"value\"], [\"label\", \"Monto total\", \"trend\", \"up\", \"helper\", \"+12%\", 3, \"value\"], [\"label\", \"Win rate\", \"trend\", \"flat\", 3, \"value\"], [\"label\", \"Pr\\u00F3ximas actividades\", \"trend\", \"down\", \"helper\", \"para hoy\", 3, \"value\"], [\"density\", \"compact\", 3, \"columns\", \"data\", \"pageSize\", \"enableInlineEdit\"]],\n      template: function DashboardPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\", 1)(2, \"h1\");\n          i0.ɵɵtext(3);\n          i0.ɵɵpipe(4, \"i18n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\");\n          i0.ɵɵtext(6, \"Resumen de pipeline y actividades.\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(7, DashboardPageComponent_Conditional_7_Template, 7, 10, \"div\", 2);\n          i0.ɵɵpipe(8, \"async\");\n          i0.ɵɵelementStart(9, \"div\", 3);\n          i0.ɵɵelement(10, \"app-mini-chart\", 4)(11, \"app-mini-chart\", 5)(12, \"app-mini-chart\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"section\", 7)(14, \"div\", 8)(15, \"h2\", 9);\n          i0.ɵɵtext(16);\n          i0.ɵɵpipe(17, \"i18n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"button\", 10);\n          i0.ɵɵtext(19, \"Marcar todas\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(20, DashboardPageComponent_Conditional_20_Template, 1, 4, \"app-data-table\", 11);\n          i0.ɵɵpipe(21, \"async\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_1_0;\n          let tmp_6_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 7, \"nav.dashboard\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵconditional(7, (tmp_1_0 = i0.ɵɵpipeBind1(8, 9, ctx.kpi$)) ? 7 : -1, tmp_1_0);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"values\", i0.ɵɵpureFunction0(15, _c0));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"values\", i0.ɵɵpureFunction0(16, _c1));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"values\", i0.ɵɵpureFunction0(17, _c2));\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 11, \"dashboard.activities\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵconditional(20, (tmp_6_0 = i0.ɵɵpipeBind1(21, 13, ctx.activities$)) ? 20 : -1, tmp_6_0);\n        }\n      },\n      dependencies: [CommonModule, i1.AsyncPipe, i1.PercentPipe, i1.CurrencyPipe, RouterModule, KpiCardComponent, MiniChartComponent, DataTableComponent, I18nPipe],\n      styles: [\"[_ngcontent-%COMP%]:root{--color-background: #f6f8fb;--color-surface: #ffffff;--color-surface-muted: #f1f3f8;--color-border: #dbe1ea;--color-text: #1f2933;--color-text-muted: #52606d;--color-accent: #4f46ef;--color-accent-soft: rgba(79, 70, 239, .12);--color-accent-strong: #372fce;--color-positive: #0ea965;--color-warning: #f59f00;--color-critical: #f04f47;--color-on-accent: #ffffff}[data-theme=dark][_ngcontent-%COMP%]{--color-background: #0f172a;--color-surface: #111c2f;--color-surface-muted: #1e2a3f;--color-border: #1f2e45;--color-text: #f7fafc;--color-text-muted: #cbd5f5;--color-accent: #7f5bff;--color-accent-soft: rgba(127, 91, 255, .2);--color-accent-strong: #997cff;--color-positive: #2bd980;--color-warning: #f7b941;--color-critical: #ff6f6b;--color-on-accent: #0f172a}body[_ngcontent-%COMP%]{font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;color:var(--color-text);background:var(--color-background);margin:0}[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px}.dashboard[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.dashboard__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}.dashboard__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}.dashboard__charts[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}.dashboard__activities[_ngcontent-%COMP%]{background:var(--color-surface);border-radius:.75rem;border:1px solid var(--color-border);padding:1rem}.dashboard__activities-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}\"],\n      changeDetection: 0\n    });\n  }\n  return DashboardPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}