{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { combineLatest, map } from 'rxjs';\nimport { DataTableComponent } from '../../shared/components/data-table/data-table.component';\nimport { OpportunityStateService } from '../../core/services/opportunity-state.service';\nimport { CsvService } from '../../core/services/csv.service';\nimport { I18nPipe } from '../../shared/utils/i18n.pipe';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction VariantAPageComponent_Conditional_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function VariantAPageComponent_Conditional_6_Template_button_click_0_listener() {\n      const vm_r2 = i0.ɵɵrestoreView(_r1);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.exportCsv(vm_r2.rows));\n    });\n    i0.ɵɵtext(1, \"Exportar CSV\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction VariantAPageComponent_Conditional_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-data-table\", 7);\n    i0.ɵɵlistener(\"cellEdited\", function VariantAPageComponent_Conditional_12_Template_app_data_table_cellEdited_0_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.onCellEdit($event));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"columns\", ctx_r2.columns)(\"data\", ctx.rows)(\"pageSize\", 30)(\"enableInlineEdit\", true);\n  }\n}\nexport let VariantAPageComponent = /*#__PURE__*/(() => {\n  class VariantAPageComponent {\n    state = inject(OpportunityStateService);\n    csv = inject(CsvService);\n    columns = [{\n      key: 'nombre',\n      title: 'Nombre',\n      sortable: true,\n      filterable: true,\n      pinned: 'left'\n    }, {\n      key: 'cuenta',\n      title: 'Cuenta',\n      sortable: true,\n      filterable: true\n    }, {\n      key: 'etapa',\n      title: 'Etapa',\n      sortable: true,\n      filterable: true,\n      summary: 'count'\n    }, {\n      key: 'monto',\n      title: 'Monto',\n      type: 'number',\n      sortable: true,\n      summary: 'sum'\n    }, {\n      key: 'probabilidad',\n      title: 'Probabilidad',\n      type: 'number',\n      sortable: true\n    }, {\n      key: 'cierrePrevisto',\n      title: 'Cierre previsto',\n      type: 'date',\n      sortable: true\n    }, {\n      key: 'propietario',\n      title: 'Propietario',\n      sortable: true,\n      filterable: true\n    }, {\n      key: 'fuente',\n      title: 'Fuente',\n      sortable: true,\n      filterable: true\n    }, {\n      key: 'territorio',\n      title: 'Territorio',\n      sortable: true,\n      filterable: true\n    }];\n    view$ = combineLatest([this.state.opportunities$, this.state.selectedIds()]).pipe(map(([rows, selection]) => ({\n      rows,\n      selection\n    })));\n    exportCsv(rows) {\n      this.csv.exportToCsv('oportunidades.csv', rows);\n    }\n    onCellEdit(event) {\n      const id = String(event.row['id']);\n      if (id) {\n        this.state.update({\n          id,\n          [event.key]: event.value\n        });\n      }\n    }\n    static ɵfac = function VariantAPageComponent_Factory(t) {\n      return new (t || VariantAPageComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: VariantAPageComponent,\n      selectors: [[\"app-variant-a-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 14,\n      vars: 9,\n      consts: [[1, \"variant\", \"variant-a\"], [1, \"variant__toolbar\"], [\"type\", \"button\"], [\"type\", \"search\", \"placeholder\", \"Filtrar r\\u00E1pido\"], [1, \"variant-a__table\"], [\"density\", \"compact\"], [\"type\", \"button\", 3, \"click\"], [\"density\", \"compact\", 3, \"cellEdited\", \"columns\", \"data\", \"pageSize\", \"enableInlineEdit\"]],\n      template: function VariantAPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"section\", 0)(1, \"header\")(2, \"h1\");\n          i0.ɵɵtext(3);\n          i0.ɵɵpipe(4, \"i18n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 1);\n          i0.ɵɵtemplate(6, VariantAPageComponent_Conditional_6_Template, 2, 0, \"button\", 2);\n          i0.ɵɵpipe(7, \"async\");\n          i0.ɵɵelementStart(8, \"button\", 2);\n          i0.ɵɵtext(9, \"Importar CSV\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"input\", 3);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"div\", 4);\n          i0.ɵɵtemplate(12, VariantAPageComponent_Conditional_12_Template, 1, 4, \"app-data-table\", 5);\n          i0.ɵɵpipe(13, \"async\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_1_0;\n          let tmp_2_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"variant.a.title\"));\n          i0.ɵɵadvance(3);\n          i0.ɵɵconditional(6, (tmp_1_0 = i0.ɵɵpipeBind1(7, 5, ctx.view$)) ? 6 : -1, tmp_1_0);\n          i0.ɵɵadvance(6);\n          i0.ɵɵconditional(12, (tmp_2_0 = i0.ɵɵpipeBind1(13, 7, ctx.view$)) ? 12 : -1, tmp_2_0);\n        }\n      },\n      dependencies: [CommonModule, i1.AsyncPipe, RouterModule, DataTableComponent, I18nPipe],\n      styles: [\"[_ngcontent-%COMP%]:root{--color-background: #f6f8fb;--color-surface: #ffffff;--color-surface-muted: #f1f3f8;--color-border: #dbe1ea;--color-text: #1f2933;--color-text-muted: #52606d;--color-accent: #4f46ef;--color-accent-soft: rgba(79, 70, 239, .12);--color-accent-strong: #372fce;--color-positive: #0ea965;--color-warning: #f59f00;--color-critical: #f04f47;--color-on-accent: #ffffff}[data-theme=dark][_ngcontent-%COMP%]{--color-background: #0f172a;--color-surface: #111c2f;--color-surface-muted: #1e2a3f;--color-border: #1f2e45;--color-text: #f7fafc;--color-text-muted: #cbd5f5;--color-accent: #7f5bff;--color-accent-soft: rgba(127, 91, 255, .2);--color-accent-strong: #997cff;--color-positive: #2bd980;--color-warning: #f7b941;--color-critical: #ff6f6b;--color-on-accent: #0f172a}body[_ngcontent-%COMP%]{font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;color:var(--color-text);background:var(--color-background);margin:0}[_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px}.variant-a[_ngcontent-%COMP%]{display:grid;gap:1rem}.variant__toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.variant__toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:var(--color-accent);color:var(--color-on-accent);padding:.5rem 1rem;border-radius:999px;cursor:pointer}.variant__toolbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem;border-radius:.5rem;border:1px solid var(--color-border)}.variant-a__table[_ngcontent-%COMP%]{border:1px solid var(--color-border);border-radius:.75rem;padding:.5rem;background:var(--color-surface)}\"],\n      changeDetection: 0\n    });\n  }\n  return VariantAPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}